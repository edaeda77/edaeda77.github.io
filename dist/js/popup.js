const De=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}};De();function I(){}const ze=t=>t;function pe(t,e){for(const n in e)t[n]=e[n];return t}function qe(t){return t()}function he(){return Object.create(null)}function D(t){t.forEach(qe)}function Re(t){return typeof t=="function"}function U(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let x;function ve(t,e){return x||(x=document.createElement("a")),x.href=e,t===x.href}function He(t){return Object.keys(t).length===0}const Ie=typeof window!="undefined";let $e=Ie?()=>window.performance.now():()=>Date.now(),de=Ie?t=>requestAnimationFrame(t):I;const B=new Set;function Oe(t){B.forEach(e=>{e.c(t)||(B.delete(e),e.f())}),B.size!==0&&de(Oe)}function Be(t){let e;return B.size===0&&de(Oe),{promise:new Promise(n=>{B.add(e={c:t,f:n})}),abort(){B.delete(e)}}}function m(t,e){t.appendChild(e)}function Ne(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Ue(t){const e=b("style");return Fe(Ne(t),e),e.sheet}function Fe(t,e){m(t.head||t,e)}function k(t,e,n){t.insertBefore(e,n||null)}function w(t){t.parentNode.removeChild(t)}function Ke(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function b(t){return document.createElement(t)}function C(t){return document.createTextNode(t)}function S(){return C(" ")}function X(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function a(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Je(t){return Array.from(t.childNodes)}function R(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Xe(t,e,n=!1){const l=document.createEvent("CustomEvent");return l.initCustomEvent(t,n,!1,e),l}const le=new Map;let se=0;function Ye(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Ze(t,e){const n={stylesheet:Ue(e),rules:{}};return le.set(t,n),n}function ge(t,e,n,l,s,i,r,u=0){const o=16.666/l;let f=`{
`;for(let L=0;L<=1;L+=o){const E=e+(n-e)*i(L);f+=L*100+`%{${r(E,1-E)}}
`}const g=f+`100% {${r(n,1-n)}}
}`,p=`__svelte_${Ye(g)}_${u}`,d=Ne(t),{stylesheet:h,rules:c}=le.get(d)||Ze(d,t);c[p]||(c[p]=!0,h.insertRule(`@keyframes ${p} ${g}`,h.cssRules.length));const y=t.style.animation||"";return t.style.animation=`${y?`${y}, `:""}${p} ${l}ms linear ${s}ms 1 both`,se+=1,p}function Ge(t,e){const n=(t.style.animation||"").split(", "),l=n.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),s=n.length-l.length;s&&(t.style.animation=l.join(", "),se-=s,se||Qe())}function Qe(){de(()=>{se||(le.forEach(t=>{const{stylesheet:e}=t;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.rules={}}),le.clear())})}let _e;function J(t){_e=t}const K=[],ce=[],te=[],ye=[],Ve=Promise.resolve();let ae=!1;function xe(){ae||(ae=!0,Ve.then(Ae))}function Y(t){te.push(t)}const ue=new Set;let ee=0;function Ae(){const t=_e;do{for(;ee<K.length;){const e=K[ee];ee++,J(e),et(e.$$)}for(J(null),K.length=0,ee=0;ce.length;)ce.pop()();for(let e=0;e<te.length;e+=1){const n=te[e];ue.has(n)||(ue.add(n),n())}te.length=0}while(K.length);for(;ye.length;)ye.pop()();ae=!1,ue.clear(),J(t)}function et(t){if(t.fragment!==null){t.update(),D(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Y)}}let F;function tt(){return F||(F=Promise.resolve(),F.then(()=>{F=null})),F}function fe(t,e,n){t.dispatchEvent(Xe(`${e?"intro":"outro"}${n}`))}const ne=new Set;let P;function Pe(){P={r:0,c:[],p:P}}function We(){P.r||D(P.c),P=P.p}function N(t,e){t&&t.i&&(ne.delete(t),t.i(e))}function W(t,e,n,l){if(t&&t.o){if(ne.has(t))return;ne.add(t),P.c.push(()=>{ne.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}}const nt={duration:0};function be(t,e,n,l){let s=e(t,n),i=l?0:1,r=null,u=null,o=null;function f(){o&&Ge(t,o)}function g(d,h){const c=d.b-i;return h*=Math.abs(c),{a:i,b:d.b,d:c,duration:h,start:d.start,end:d.start+h,group:d.group}}function p(d){const{delay:h=0,duration:c=300,easing:y=ze,tick:L=I,css:E}=s||nt,z={start:$e()+h,b:d};d||(z.group=P,P.r+=1),r||u?u=z:(E&&(f(),o=ge(t,i,d,c,h,y,E)),d&&L(0,1),r=g(z,c),Y(()=>fe(t,d,"start")),Be(q=>{if(u&&q>u.start&&(r=g(u,c),u=null,fe(t,r.b,"start"),E&&(f(),o=ge(t,i,r.b,r.duration,0,y,s.css))),r){if(q>=r.end)L(i=r.b,1-i),fe(t,r.b,"end"),u||(r.b?f():--r.group.r||D(r.group.c)),r=null;else if(q>=r.start){const O=q-r.start;i=r.a+r.d*y(O/r.duration),L(i,1-i)}}return!!(r||u)}))}return{run(d){Re(s)?tt().then(()=>{s=s(),p(d)}):p(d)},end(){f(),r=u=null}}}function we(t,e){const n={},l={},s={$$scope:1};let i=t.length;for(;i--;){const r=t[i],u=e[i];if(u){for(const o in r)o in u||(l[o]=1);for(const o in u)s[o]||(n[o]=u[o],s[o]=1);t[i]=u}else for(const o in r)s[o]=1}for(const r in l)r in n||(n[r]=void 0);return n}function ke(t){return typeof t=="object"&&t!==null?t:{}}function re(t){t&&t.c()}function Z(t,e,n,l){const{fragment:s,on_mount:i,on_destroy:r,after_update:u}=t.$$;s&&s.m(e,n),l||Y(()=>{const o=i.map(qe).filter(Re);r?r.push(...o):D(o),t.$$.on_mount=[]}),u.forEach(Y)}function G(t,e){const n=t.$$;n.fragment!==null&&(D(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function lt(t,e){t.$$.dirty[0]===-1&&(K.push(t),xe(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Q(t,e,n,l,s,i,r,u=[-1]){const o=_e;J(t);const f=t.$$={fragment:null,ctx:null,props:i,update:I,not_equal:s,bound:he(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(o?o.$$.context:[])),callbacks:he(),dirty:u,skip_bound:!1,root:e.target||o.$$.root};r&&r(f.root);let g=!1;if(f.ctx=n?n(t,e.props||{},(p,d,...h)=>{const c=h.length?h[0]:d;return f.ctx&&s(f.ctx[p],f.ctx[p]=c)&&(!f.skip_bound&&f.bound[p]&&f.bound[p](c),g&&lt(t,p)),d}):[],f.update(),g=!0,D(f.before_update),f.fragment=l?l(f.ctx):!1,e.target){if(e.hydrate){const p=Je(e.target);f.fragment&&f.fragment.l(p),p.forEach(w)}else f.fragment&&f.fragment.c();e.intro&&N(t.$$.fragment),Z(t,e.target,e.anchor,e.customElement),Ae()}J(o)}class V{$destroy(){G(this,1),this.$destroy=I}$on(e,n){const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(e){this.$$set&&!He(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function st(t){let e,n,l,s,i,r,u,o,f,g,p;return{c(){e=b("div"),n=b("table"),l=b("tbody"),s=b("tr"),s.innerHTML=`<td class="svelte-8njtq2">40 Lines</td> 
                <td class="svelte-8njtq2">Blitz</td>`,i=S(),r=b("tr"),u=b("td"),o=C(t[0]),f=S(),g=b("td"),p=C(t[1]),a(u,"class","svelte-8njtq2"),a(g,"class","svelte-8njtq2"),a(n,"id","recordTable"),a(n,"class","svelte-8njtq2"),a(e,"id","records"),a(e,"class","svelte-8njtq2")},m(d,h){k(d,e,h),m(e,n),m(n,l),m(l,s),m(l,i),m(l,r),m(r,u),m(u,o),m(r,f),m(r,g),m(g,p)},p(d,[h]){h&1&&R(o,d[0]),h&2&&R(p,d[1])},i:I,o:I,d(d){d&&w(e)}}}function rt(t,e,n){let{finalTime:l}=e,{blitzScore:s}=e;return t.$$set=i=>{"finalTime"in i&&n(0,l=i.finalTime),"blitzScore"in i&&n(1,s=i.blitzScore)},[l,s]}class it extends V{constructor(e){super(),Q(this,e,rt,st,U,{finalTime:0,blitzScore:1})}}const H=[];function ot(t,e=I){let n;const l=new Set;function s(u){if(U(t,u)&&(t=u,n)){const o=!H.length;for(const f of l)f[1](),H.push(f,t);if(o){for(let f=0;f<H.length;f+=2)H[f][0](H[f+1]);H.length=0}}}function i(u){s(u(t))}function r(u,o=I){const f=[u,o];return l.add(f),l.size===1&&(n=e(s)||I),u(t),()=>{l.delete(f),l.size===0&&(n(),n=null)}}return{set:s,update:i,subscribe:r}}const M={url:"",user:{name:"",level:"",image:"",rating:""}},$=ot({loader:!1,replay:!1});function je(t,e,n){const l=t.slice();return l[6]=e[n],l[8]=n,l}function ut(t){let e,n,l,s,i=t[6].endcontext[1].user.username+"",r,u,o=t[6].endcontext[0].user.username+"",f,g,p,d=ie(t[6].ts)+"",h;return{c(){e=b("div"),n=b("div"),n.textContent="Lose",l=S(),s=b("div"),r=C(i),u=C(" vs "),f=C(o),g=S(),p=b("div"),h=C(d),a(n,"class","versus versus-lose svelte-10tw3ne"),a(s,"class","versus versus-vs svelte-10tw3ne"),a(p,"class","versus versus-time svelte-10tw3ne"),a(e,"class","history lose svelte-10tw3ne")},m(c,y){k(c,e,y),m(e,n),m(e,l),m(e,s),m(s,r),m(s,u),m(s,f),m(e,g),m(e,p),m(p,h)},p(c,y){y&2&&i!==(i=c[6].endcontext[1].user.username+"")&&R(r,i),y&2&&o!==(o=c[6].endcontext[0].user.username+"")&&R(f,o),y&2&&d!==(d=ie(c[6].ts)+"")&&R(h,d)},d(c){c&&w(e)}}}function ft(t){let e,n,l,s,i=t[6].endcontext[0].user.username+"",r,u,o=t[6].endcontext[1].user.username+"",f,g,p,d=ie(t[6].ts)+"",h;return{c(){e=b("div"),n=b("div"),n.textContent="Win",l=S(),s=b("div"),r=C(i),u=C(" vs "),f=C(o),g=S(),p=b("div"),h=C(d),a(n,"class","versus versus-win svelte-10tw3ne"),a(s,"class","versus versus-vs svelte-10tw3ne"),a(p,"class","versus versus-time svelte-10tw3ne"),a(e,"class","history win svelte-10tw3ne")},m(c,y){k(c,e,y),m(e,n),m(e,l),m(e,s),m(s,r),m(s,u),m(s,f),m(e,g),m(e,p),m(p,h)},p(c,y){y&2&&i!==(i=c[6].endcontext[0].user.username+"")&&R(r,i),y&2&&o!==(o=c[6].endcontext[1].user.username+"")&&R(f,o),y&2&&d!==(d=ie(c[6].ts)+"")&&R(h,d)},d(c){c&&w(e)}}}function Se(t){let e,n,l,s,i,r,u,o,f,g;function p(c,y){return c[6].endcontext[0].user.username===c[2].user.name?ft:ut}let d=p(t),h=d(t);return{c(){e=b("input"),s=S(),i=b("label"),h.c(),r=S(),a(e,"id",n="match-input-"+t[8]),e.__value=l=t[8],e.value=e.__value,a(e,"type","radio"),a(e,"class","match-input svelte-10tw3ne"),t[5][0].push(e),a(i,"class","match-history svelte-10tw3ne"),a(i,"for",u="match-input-"+t[8]),a(i,"data-url",o=t[6].replayid)},m(c,y){k(c,e,y),e.checked=e.__value===t[0],k(c,s,y),k(c,i,y),h.m(i,null),m(i,r),f||(g=[X(e,"change",t[4]),X(i,"click",t[3])],f=!0)},p(c,y){y&1&&(e.checked=e.__value===c[0]),d===(d=p(c))&&h?h.p(c,y):(h.d(1),h=d(c),h&&(h.c(),h.m(i,r))),y&2&&o!==(o=c[6].replayid)&&a(i,"data-url",o)},d(c){c&&w(e),t[5][0].splice(t[5][0].indexOf(e),1),c&&w(s),c&&w(i),h.d(),f=!1,D(g)}}}function ct(t){let e,n=t[1],l=[];for(let s=0;s<n.length;s+=1)l[s]=Se(je(t,n,s));return{c(){e=b("div");for(let s=0;s<l.length;s+=1)l[s].c();a(e,"id","history"),a(e,"class","svelte-10tw3ne")},m(s,i){k(s,e,i);for(let r=0;r<l.length;r+=1)l[r].m(e,null)},p(s,[i]){if(i&15){n=s[1];let r;for(r=0;r<n.length;r+=1){const u=je(s,n,r);l[r]?l[r].p(u,i):(l[r]=Se(u),l[r].c(),l[r].m(e,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},i:I,o:I,d(s){s&&w(e),Ke(l,s)}}}function ie(t){const e=new Date(t);return`${e.getFullYear()}\uB144 ${e.getMonth()+1}\uC6D4 ${e.getDate()}\uC77C ${e.getHours()}\uC2DC`}function at(t,e,n){let{replays:l=[]}=e,{matchInput:s}=e;function i(o){const f=o.currentTarget;n(2,M.url=`https://tetr.io/#r:${f.dataset.url}`,M),$.update(g=>(g.replay=!0,g))}const r=[[]];function u(){s=this.__value,n(0,s)}return t.$$set=o=>{"replays"in o&&n(1,l=o.replays),"matchInput"in o&&n(0,s=o.matchInput)},[s,l,M,i,u,r]}class dt extends V{constructor(e){super(),Q(this,e,at,ct,U,{replays:1,matchInput:0})}}function _t(t){let e,n,l,s,i,r,u,o,f,g,p,d,h,c,y,L,E,z,q,O;return{c(){e=b("div"),e.textContent="\uD1B5\uC0B0 \uC804\uC801",n=S(),l=b("div"),s=C(t[0]),i=S(),r=b("div"),u=C(t[1]),o=S(),f=b("div"),g=C(t[2]),p=S(),d=b("br"),h=S(),c=b("div"),c.textContent="\uCD5C\uADFC \uC804\uC801",y=S(),L=b("div"),E=C(t[3]),z=S(),q=b("div"),O=C(t[4]),a(e,"class","WL svelte-axly0o"),a(l,"class","WL wins svelte-axly0o"),a(r,"class","WL loses svelte-axly0o"),a(f,"class","WL svelte-axly0o"),a(c,"class","WL svelte-axly0o"),a(L,"class","WL wins svelte-axly0o"),a(q,"class","WL loses svelte-axly0o")},m(_,v){k(_,e,v),k(_,n,v),k(_,l,v),m(l,s),k(_,i,v),k(_,r,v),m(r,u),k(_,o,v),k(_,f,v),m(f,g),k(_,p,v),k(_,d,v),k(_,h,v),k(_,c,v),k(_,y,v),k(_,L,v),m(L,E),k(_,z,v),k(_,q,v),m(q,O)},p(_,[v]){v&1&&R(s,_[0]),v&2&&R(u,_[1]),v&4&&R(g,_[2]),v&8&&R(E,_[3]),v&16&&R(O,_[4])},i:I,o:I,d(_){_&&w(e),_&&w(n),_&&w(l),_&&w(i),_&&w(r),_&&w(o),_&&w(f),_&&w(p),_&&w(d),_&&w(h),_&&w(c),_&&w(y),_&&w(L),_&&w(z),_&&w(q)}}}function mt(t,e,n){let{total_win:l}=e,{total_lose:s}=e,{win_rate:i}=e,{recent_win:r}=e,{recent_lose:u}=e;return t.$$set=o=>{"total_win"in o&&n(0,l=o.total_win),"total_lose"in o&&n(1,s=o.total_lose),"win_rate"in o&&n(2,i=o.win_rate),"recent_win"in o&&n(3,r=o.recent_win),"recent_lose"in o&&n(4,u=o.recent_lose)},[l,s,i,r,u]}class pt extends V{constructor(e){super(),Q(this,e,mt,_t,U,{total_win:0,total_lose:1,win_rate:2,recent_win:3,recent_lose:4})}}let me="https://ch.tetr.io";const ht=t=>Math.floor(Math.pow(t/500,.6)+t/(5e3+Math.max(0,t-4e6)/5e3)+1),vt=async t=>await(await fetch(`${me}/api/streams/league_userrecent_${encodeURIComponent(t)}`)).json(),gt=async t=>await(await fetch(`${me}/api/users/${t}/records`)).json(),yt=t=>{const e=Math.round(t),n=(e%1e3).toString().padStart(3,"0"),l=(Math.floor(e/1e3)%60).toString().padStart(2,"0"),s=Math.floor(e/6e4).toString();return{ms:n,s:l,m:s}},bt=async t=>await(await fetch(`${me}/api/users/${t}`)).json();function Le(t){let e,n,l,s,i;return{c(){e=b("h3"),e.textContent="Replay",n=S(),l=b("button"),l.textContent="\u25B6",a(e,"id","replay-header"),a(e,"class","svelte-11sjjmk"),a(l,"id","replay"),a(l,"class","svelte-11sjjmk")},m(r,u){k(r,e,u),k(r,n,u),k(r,l,u),s||(i=X(l,"click",t[9]),s=!0)},p:I,d(r){r&&w(e),r&&w(n),r&&w(l),s=!1,i()}}}function Ee(t){let e,n,l,s,i=t[0].user.rating+"",r;return{c(){e=b("img"),l=S(),s=b("div"),r=C(i),a(e,"id","rank-image"),ve(e.src,n=t[0].user.image)||a(e,"src",n),a(e,"alt","rank"),a(e,"class","svelte-11sjjmk"),a(s,"id","rating"),a(s,"class","svelte-11sjjmk")},m(u,o){k(u,e,o),k(u,l,o),k(u,s,o),m(s,r)},p(u,o){o&1&&!ve(e.src,n=u[0].user.image)&&a(e,"src",n),o&1&&i!==(i=u[0].user.rating+"")&&R(r,i)},d(u){u&&w(e),u&&w(l),u&&w(s)}}}function Te(t){let e,n,l,s;const i=[t[6]];let r={};for(let f=0;f<i.length;f+=1)r=pe(r,i[f]);e=new pt({props:r});const u=[t[7]];let o={};for(let f=0;f<u.length;f+=1)o=pe(o,u[f]);return l=new it({props:o}),{c(){re(e.$$.fragment),n=S(),re(l.$$.fragment)},m(f,g){Z(e,f,g),k(f,n,g),Z(l,f,g),s=!0},p(f,g){const p=g&64?we(i,[ke(f[6])]):{};e.$set(p);const d=g&128?we(u,[ke(f[7])]):{};l.$set(d)},i(f){s||(N(e.$$.fragment,f),N(l.$$.fragment,f),s=!0)},o(f){W(e.$$.fragment,f),W(l.$$.fragment,f),s=!1},d(f){G(e,f),f&&w(n),G(l,f)}}}function wt(t){let e,n,l,s,i,r,u,o=t[0].user.name+"",f,g,p,d=t[0].user.level+"",h,c,y,L,E,z,q,O,_=t[3]&&Le(t),v=t[0].user.image&&Ee(t),j=t[4]&&Te(t);return E=new dt({props:{matchInput:t[5],replays:t[2]}}),{c(){e=b("div"),_&&_.c(),n=S(),l=b("input"),s=S(),i=b("button"),i.textContent="\uAC80\uC0C9",r=S(),u=b("div"),f=C(o),g=S(),p=b("div"),h=C(d),c=S(),v&&v.c(),y=S(),j&&j.c(),L=S(),re(E.$$.fragment),a(l,"id","user-input"),l.required=!0,a(l,"minlength",3),a(l,"maxlength",16),a(l,"pattern","[0-9a-zA-Z\\\\_\\\\-]*"),a(l,"type","text"),a(l,"placeholder","\uC720\uC800\uBA85(\uC18C\uBB38\uC790\uB85C \uC785\uB825\uD574\uC8FC\uC138\uC694.)"),a(l,"class","svelte-11sjjmk"),a(i,"id","submit"),a(i,"class","svelte-11sjjmk"),a(u,"id","username"),a(u,"class","svelte-11sjjmk"),a(p,"id","level"),a(p,"class","svelte-11sjjmk"),a(e,"id","search"),a(e,"class","svelte-11sjjmk")},m(T,A){k(T,e,A),_&&_.m(e,null),m(e,n),m(e,l),t[10](l),m(e,s),m(e,i),m(e,r),m(e,u),m(u,f),m(e,g),m(e,p),m(p,h),m(e,c),v&&v.m(e,null),m(e,y),j&&j.m(e,null),m(e,L),Z(E,e,null),z=!0,q||(O=[X(l,"keyup",t[8]),X(i,"click",t[8])],q=!0)},p(T,[A]){T[3]?_?_.p(T,A):(_=Le(T),_.c(),_.m(e,n)):_&&(_.d(1),_=null),(!z||A&1)&&o!==(o=T[0].user.name+"")&&R(f,o),(!z||A&1)&&d!==(d=T[0].user.level+"")&&R(h,d),T[0].user.image?v?v.p(T,A):(v=Ee(T),v.c(),v.m(e,y)):v&&(v.d(1),v=null),T[4]?j?(j.p(T,A),A&16&&N(j,1)):(j=Te(T),j.c(),N(j,1),j.m(e,L)):j&&(Pe(),W(j,1,1,()=>{j=null}),We());const oe={};A&32&&(oe.matchInput=T[5]),A&4&&(oe.replays=T[2]),E.$set(oe)},i(T){z||(N(j),N(E.$$.fragment,T),z=!0)},o(T){W(j),W(E.$$.fragment,T),z=!1},d(T){T&&w(e),_&&_.d(),t[10](null),v&&v.d(),j&&j.d(),G(E),q=!1,D(O)}}}function kt(t,e,n){let l,s=[],i=!1,r=!1,u;const o={total_win:"",total_lose:"",win_rate:"",recent_win:"",recent_lose:""},f={finalTime:"",blitzScore:""};$.subscribe(c=>n(3,i=c.replay));async function g(c){$.update(j=>(j.loader=!0,j.replay=!1,j)),n(5,u=-1);const y=await bt(c);if(y.error)return $.update(j=>(j.loader=!1,j)),n(4,r=!1),n(0,M.user.name="\uC720\uC800\uAC00 \uC874\uC7AC\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.",M),n(0,M.user.level="",M),n(0,M.user.image="",M),n(2,s=[]),n(1,l.value="",l),!1;const L=await vt(y.data.user._id);let E=0,z=0;n(2,s=L.data.records);for(let j of s)j.endcontext[0].user.username===c?E++:z++;const q=await gt(c),O=q.data.records.blitz.record,_=q.data.records["40l"].record;if(O?n(7,f.blitzScore=O.endcontext.score.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g,","),f):n(7,f.blitzScore="Unplayed",f),_){const j=yt(_.endcontext.finalTime);n(7,f.finalTime=`${j.m}:${j.s}`,f)}else n(7,f.finalTime="Unplayed",f);const v=y.data.user.league;n(0,M.user.name=c,M),n(0,M.user.level=`Level : ${ht(y.data.user.xp)}`,M),n(0,M.user.image=`https://tetr.io/res/league-ranks/${v.rank}.png`,M),n(0,M.user.rating=`${Math.floor(v.rating).toString()}\uC810`,M),n(2,s=L.data.records),$.update(j=>(j.loader=!1,j)),n(6,o.total_win=`${v.gameswon}\uC2B9`,o),n(6,o.total_lose=`${v.gamesplayed-v.gameswon}\uD328`,o),n(6,o.win_rate=`(\uC2B9\uB960: ${Math.floor(v.gameswon/v.gamesplayed*1e4)/100}%)`,o),n(6,o.recent_win=`${E}\uC2B9`,o),n(6,o.recent_lose=`${z}\uD328`,o),n(4,r=!0)}function p(c){(c instanceof KeyboardEvent&&c.code==="Enter"||c.currentTarget instanceof HTMLButtonElement)&&l.validity.valid&&g(l.value)}function d(c){i&&window.open(M.url)}function h(c){ce[c?"unshift":"push"](()=>{l=c,n(1,l)})}return[M,l,s,i,r,u,o,f,p,d,h]}class jt extends V{constructor(e){super(),Q(this,e,kt,wt,U,{})}}function Me(t,{delay:e=0,duration:n=400,easing:l=ze}={}){const s=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:l,css:i=>`opacity: ${i*s}`}}function Ce(t){let e,n,l;return{c(){e=b("div"),a(e,"id","loader"),a(e,"class","svelte-1ah0ily")},m(s,i){k(s,e,i),l=!0},i(s){l||(Y(()=>{n||(n=be(e,Me,{},!0)),n.run(1)}),l=!0)},o(s){n||(n=be(e,Me,{},!1)),n.run(0),l=!1},d(s){s&&w(e),s&&n&&n.end()}}}function St(t){let e,n,l,s,i,r=t[0]&&Ce();return s=new jt({}),{c(){e=b("header"),e.innerHTML=`<img src="/images/logo.png" id="logo" alt="logo" class="svelte-1ah0ily"/> 
    <img src="/images/header_background.png" id="header-background" alt="background"/>`,n=S(),r&&r.c(),l=S(),re(s.$$.fragment)},m(u,o){k(u,e,o),k(u,n,o),r&&r.m(u,o),k(u,l,o),Z(s,u,o),i=!0},p(u,[o]){u[0]?r?o&1&&N(r,1):(r=Ce(),r.c(),N(r,1),r.m(l.parentNode,l)):r&&(Pe(),W(r,1,1,()=>{r=null}),We())},i(u){i||(N(r),N(s.$$.fragment,u),i=!0)},o(u){W(r),W(s.$$.fragment,u),i=!1},d(u){u&&w(e),u&&w(n),r&&r.d(u),u&&w(l),G(s,u)}}}function Lt(t,e,n){let l=!1;return $.subscribe(s=>n(0,l=s.loader)),[l]}class Et extends V{constructor(e){super(),Q(this,e,Lt,St,U,{})}}new Et({target:document.querySelector("#app")});
